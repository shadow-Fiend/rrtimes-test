{"version":3,"sources":["webpack:///./apps/root/component.js","webpack:///./apps/root/action.js","webpack:///./apps/root/reducer.js"],"names":["_react","__webpack_require__","_mkMetaEngine","C","wrapper","appInfo","this","props","monkeyKing","_extends3","default","path","Component","option","metaAction","MetaAction","o","action","ret","config","metaHandlers","_mkUtils","_data","_this","_classCallCheck3","onInit","_ref","component","injections","initState","getInitState","defaultAppName","data","currentAppName","history","getChildApp","reduce","listen","onRedirect","appName","childApp","location","gf","targetAppName","_ref2","pushChildApp","componentWillUnmount","unlisten","current","metaReducer","MetaReducer","reducer","_initialiseProps","call","init","state","redirect","sf"],"mappings":"gOAAAA,EAAAC,EAAA,GAEAC,QAAAD,EAAA,UAEAA,EAAA,8DAGqBE,GADpB,EAAAD,EAAAE,SAAQC,qNAGP,OAAOC,KAAKC,MAAMC,YAAX,EAAAC,EAAAC,YAA2BJ,KAAKC,OAAOI,KAAM,iBAFvBC,2BAAVT,4ICsCN,SAAiBU,GAC5B,IAAMC,EAAa,IAAIC,SAAWF,GAC9BG,EAAI,IAAIC,GAAJ,EAAAR,EAAAC,YAAgBG,GAAQC,gBAC5BI,mBAAWJ,EAAeE,GAI9B,OAFAF,EAAWK,QAASC,aAAcF,IAE3BA,KApDXjB,EAAA,QACAC,EAAAD,EAAA,SACAA,EAAA,OACAoB,EAAApB,EAAA,IACAqB,EAAArB,EAAA,6DAEMgB,EACF,SAAAA,EAAYJ,GAAQ,IAAAU,EAAAjB,MAAA,EAAAkB,EAAAd,SAAAJ,KAAAW,GAAAX,KAKpBmB,OAAS,SAAAC,GAA+B,IAA5BC,EAA4BD,EAA5BC,UAAWC,EAAiBF,EAAjBE,WACnBL,EAAKI,UAAYA,EACjBJ,EAAKK,WAAaA,EAClB,IAAMC,GAAY,EAAAP,EAAAQ,gBACdC,EAAiBF,EAAUG,KAAKC,eAChCA,EAAiBC,UAAQC,YAAY,gBAAkBJ,EAE3DF,EAAUG,KAAKC,eAAiBA,EAChCL,EAAWQ,OAAO,QAAUP,cAE5BK,UAAQG,OAAO,cAAed,EAAKc,QACnCd,EAAKe,YAAaC,QAASL,UAAQC,YAAY,gBAAkBJ,KAhBjDzB,KAmBpB+B,OAAS,SAACG,EAAUC,EAAUxB,GAC1B,IAAMc,GAAiB,EAAAT,EAAAQ,gBAAeE,KAAKC,eACrCA,EAAiBV,EAAKT,WAAW4B,GAAG,wBAA0BX,EAC9DY,EAAgBH,GAAYT,EAC9BY,GAAiBV,GAGrBV,EAAKK,WAAWQ,OAAO,WAAYO,IA1BnBrC,KA6BpBgC,WAAa,SAAAM,GAAiB,IAAdL,EAAcK,EAAdL,QACZL,UAAQW,aAAa,cAAeN,IA9BpBjC,KAiCpBwC,qBAAuB,WACnBZ,UAAQa,SAAS,cAAexB,EAAKc,SAjCrC/B,KAAKQ,WAAaD,EAAOC,WACzBR,KAAKa,OAASA,UAAO6B,uJCYd,SAAiBnC,GAC5B,IAAMoC,EAAc,IAAIC,UAAYrC,GAChCG,EAAI,IAAImC,GAAJ,EAAA1C,EAAAC,YAAiBG,GAAQoC,iBAEjC,SAAAxC,EAAAC,YAAYuC,EAAgBjC,IAzBhCf,EAAA,QACAC,EAAAD,EAAA,SACAA,EAAA,OACAA,EAAA,MACAA,EAAA,2DAEMkD,KACF,SAAAA,EAAYtC,IAAQ,EAAAW,EAAAd,SAAAJ,KAAA6C,GAAAC,EAAAC,KAAA/C,MAChBA,KAAK2C,YAAcpC,EAAOoC,YAC1B3C,KAAKa,OAASA,UAAO6B,sCAGzBM,KAAO,SAACC,EAAO1C,GACX,OAAOU,EAAK0B,YAAYK,KAAKC,EAAO1C,EAAOgB,iBAG/C2B,SAAW,SAACD,EAAOhB,GACf,OAAOhB,EAAK0B,YAAYQ,GAAGF,EAAO,sBAAuBhB","file":"mk-app-root.0920bb64.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { wrapper } from 'mk-meta-engine'\n\nimport appInfo from './index'\n\n@wrapper(appInfo)\nexport default class C extends Component {\n\trender() {\n\t\treturn this.props.monkeyKing({ ...this.props, path: 'root' })\n\t}\n}","import React from 'react'\nimport { action as MetaAction, AppLoader } from 'mk-meta-engine'\nimport config from './config'\nimport { history } from 'mk-utils'\nimport { getInitState } from './data'\n\nclass action {\n    constructor(option) {\n        this.metaAction = option.metaAction\n        this.config = config.current\n    }\n\n    onInit = ({ component, injections }) => {\n        this.component = component\n        this.injections = injections\n        const initState = getInitState(),\n            defaultAppName = initState.data.currentAppName,\n            currentAppName = history.getChildApp('mk-app-root') || defaultAppName\n\n        initState.data.currentAppName = currentAppName\n        injections.reduce('init', { initState })\n\n        history.listen('mk-app-root', this.listen)\n        this.onRedirect({ appName: history.getChildApp('mk-app-root') || defaultAppName })\n    }\n\n    listen = (childApp, location, action) => {\n        const defaultAppName = getInitState().data.currentAppName\n        const currentAppName = this.metaAction.gf('data.currentAppName') || defaultAppName\n        const targetAppName = childApp || defaultAppName\n        if (targetAppName == currentAppName) {\n            return\n        }\n        this.injections.reduce('redirect', targetAppName)\n    }\n\n    onRedirect = ({ appName }) => {\n        history.pushChildApp('mk-app-root', appName)\n    }\n\n    componentWillUnmount = () => {\n        history.unlisten('mk-app-root', this.listen)\n    }\n}\n\nexport default function creator(option) {\n    const metaAction = new MetaAction(option),\n        o = new action({ ...option, metaAction }),\n        ret = { ...metaAction, ...o }\n\n    metaAction.config({ metaHandlers: ret })\n\n    return ret\n}","import { Map } from 'immutable'\nimport { reducer as MetaReducer } from 'mk-meta-engine'\nimport config from './config'\nimport { getInitState } from './data'\nimport { history } from 'mk-utils'\n\nclass reducer {\n    constructor(option) {\n        this.metaReducer = option.metaReducer\n        this.config = config.current\n    }\n\n    init = (state, option) => {\n        return this.metaReducer.init(state, option.initState)\n    }\n\n    redirect = (state, appName) => {\n        return this.metaReducer.sf(state, 'data.currentAppName', appName)\n    }\n}\n\nexport default function creator(option) {\n    const metaReducer = new MetaReducer(option),\n        o = new reducer({ ...option, metaReducer })\n\n    return { ...metaReducer, ...o }\n}"],"sourceRoot":""}