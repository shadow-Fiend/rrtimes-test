(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=j(n(2)),a=j(n(43)),o=j(n(4)),u=j(n(8)),i=j(n(3)),c=j(n(5)),d=n(1),f=(j(d),n(955)),p=j(n(1500));function j(e){return e&&e.__esModule?e:{default:e}}var l=(0,f.wrapper)(p.default)(s=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,r.default)({},this.props,{path:"root"}))}}]),t}(d.Component))||s;t.default=l,e.exports=t.default},1553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,a=j(n(2)),o=j(n(956)),u=j(n(957)),i=j(n(4));t.default=function(e){var t=new c.action(e),n=p.default.actionCreator((0,a.default)({},e,{metaAction:t})),s=new l((0,a.default)({},e,{metaAction:t,extendAction:n})),r=(0,a.default)({},t,n.formAction,s);return t.config({metaHandlers:r}),r};j(n(1));var c=n(955),d=n(58),f=(j(n(12)),j(n(1489))),p=j(n(1705));function j(e){return e&&e.__esModule?e:{default:e}}var l=(s=function e(t){(0,i.default)(this,e),r.call(this),this.metaAction=t.metaAction,this.extendAction=t.extendAction,this.config=f.default.current,this.webapi=this.config.webapi},r=function(){var e=this;this.onInit=function(t){var n=t.component,s=t.injections;e.extendAction.formAction.onInit({component:n,injections:s}),e.component=n,e.injections=s,e.component.props.setOkListener&&e.component.props.setOkListener(e.onOk),s.reduce("init",{isPop:e.component.props.isPop}),e.load()},this.load=(0,u.default)(o.default.mark(function t(){var n,s;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,e.webapi.department.query();case 3:if(s=t.sent,n.departments=s,!e.component.props.personId&&0!=e.component.props.personId){t.next=10;break}return t.next=8,e.webapi.person.findById(e.component.props.personId);case 8:s=t.sent,n.person=s;case 10:e.injections.reduce("load",n);case 11:case"end":return t.stop()}},t,e)})),this.onOk=(0,u.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.save();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)})),this.save=(0,u.default)(o.default.mark(function t(){var n,s,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metaAction.gf("data.form").toJS(),t.next=3,e.extendAction.formAction.check([{path:"data.form.name",value:n.name},{path:"data.form.mobile",value:n.mobile}],e.check);case 3:if(t.sent){t.next=6;break}return t.abrupt("return",!1);case 6:if(!n.id&&0!=n.id){t.next=13;break}return t.next=9,e.webapi.person.update(n);case 9:(s=t.sent)&&(e.metaAction.toast("success","保存人员成功"),e.injections.reduce("setPerson",s)),t.next=17;break;case 13:return t.next=15,e.webapi.person.create(n);case 15:(r=t.sent)&&(e.metaAction.toast("success","保存人员成功"),e.injections.reduce("setPerson",r));case 17:return t.abrupt("return",!0);case 18:case"end":return t.stop()}},t,e)})),this.add=function(){e.injections.reduce("setPerson",{id:void 0,name:"",sex:"0",birthday:"1980-01-01",mobile:"",dept:void 0,address:"北京海淀"})},this.prev=(0,u.default)(o.default.mark(function t(){var n,s;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metaAction.gf("data.form.id"),t.next=3,e.webapi.person.prev(n);case 3:(s=t.sent)&&e.injections.reduce("setPerson",s);case 5:case"end":return t.stop()}},t,e)})),this.next=(0,u.default)(o.default.mark(function t(){var n,s;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metaAction.gf("data.form.id"),t.next=3,e.webapi.person.next(n);case 3:(s=t.sent)&&e.injections.reduce("setPerson",s);case 5:case"end":return t.stop()}},t,e)})),this.check=function(){var t=(0,u.default)(o.default.mark(function t(n){var s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.path){e.next=2;break}return e.abrupt("return");case 2:if("data.form.name"!=n.path){e.next=6;break}return e.abrupt("return",{errorPath:"data.other.error.name",message:n.value?"":"请录入姓名"});case 6:if("data.form.mobile"!=n.path){e.next=10;break}return s=void 0,n.value?/^1[3|4|5|8][0-9]\d{8}$/.test(n.value)||(s="请录入有效的手机号"):s="请录入手机号",e.abrupt("return",{errorPath:"data.other.error.mobile",message:s});case 10:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.departmentFocus=(0,u.default)(o.default.mark(function t(){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webapi.department.query();case 2:n=t.sent,e.metaAction.sf("data.other.departments",(0,d.fromJS)(n));case 4:case"end":return t.stop()}},t,e)})),this.addDepartment=(0,u.default)(o.default.mark(function t(){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.config.apps["mk-app-department-card"]){t.next=2;break}throw"依赖mk-app-department-card app,请使用mk clone mk-app-department-card命令添加";case 2:return t.next=4,e.metaAction.modal("show",{title:"新增部门",children:e.metaAction.loadApp("mk-app-department-card",{store:e.component.props.store})});case 4:(n=t.sent)&&e.injections.reduce("addDepartment",n);case 6:case"end":return t.stop()}},t,e)})),this.fieldChange=function(t,n){e.extendAction.formAction.fieldChange(t,n,e.check)}},s);e.exports=t.default},1554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r,a=d(n(2)),o=d(n(4));t.default=function(e){var t=new i.reducer(e),n=new f((0,a.default)({},e,{metaReducer:t}));return(0,a.default)({},t,n)};var u=n(58),i=n(955),c=(d(n(1489)),d(n(12)),n(1501));function d(e){return e&&e.__esModule?e:{default:e}}var f=(s=function e(t){(0,o.default)(this,e),r.call(this),this.metaReducer=t.metaReducer},r=function(){var e=this;this.init=function(t,n){return e.metaReducer.init(t,(0,c.getInitState)(n))},this.load=function(t,n){var s=n.person,r=n.departments;return s&&(t=e.metaReducer.sf(t,"data.form",(0,u.fromJS)(s))),e.metaReducer.sf(t,"data.other.departments",(0,u.fromJS)(r))},this.setPerson=function(t,n){return t=e.metaReducer.sf(t,"data.form",(0,u.fromJS)(n)),e.metaReducer.sf(t,"data.other.checkFields",(0,u.List)())},this.addDepartment=function(t,n){n.id;var s=n.code;n.name;return e.metaReducer.sf(t,"data.form.department",s)}},s);e.exports=t.default},1705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return e&&e.__esModule?e:{default:e}}(n(1706));t.default={actionCreator:function(e){return{formAction:new s.default.action(e)}}},e.exports=t.default},1713:function(e,t,n){var s={"./af":1581,"./af.js":1581,"./ar":1582,"./ar-dz":1583,"./ar-dz.js":1583,"./ar-kw":1584,"./ar-kw.js":1584,"./ar-ly":1585,"./ar-ly.js":1585,"./ar-ma":1586,"./ar-ma.js":1586,"./ar-sa":1587,"./ar-sa.js":1587,"./ar-tn":1588,"./ar-tn.js":1588,"./ar.js":1582,"./az":1589,"./az.js":1589,"./be":1590,"./be.js":1590,"./bg":1591,"./bg.js":1591,"./bm":1592,"./bm.js":1592,"./bn":1593,"./bn.js":1593,"./bo":1594,"./bo.js":1594,"./br":1595,"./br.js":1595,"./bs":1596,"./bs.js":1596,"./ca":1597,"./ca.js":1597,"./cs":1598,"./cs.js":1598,"./cv":1599,"./cv.js":1599,"./cy":1600,"./cy.js":1600,"./da":1601,"./da.js":1601,"./de":1602,"./de-at":1603,"./de-at.js":1603,"./de-ch":1604,"./de-ch.js":1604,"./de.js":1602,"./dv":1605,"./dv.js":1605,"./el":1606,"./el.js":1606,"./en-au":1607,"./en-au.js":1607,"./en-ca":1608,"./en-ca.js":1608,"./en-gb":1609,"./en-gb.js":1609,"./en-ie":1610,"./en-ie.js":1610,"./en-il":1611,"./en-il.js":1611,"./en-nz":1612,"./en-nz.js":1612,"./eo":1613,"./eo.js":1613,"./es":1614,"./es-do":1615,"./es-do.js":1615,"./es-us":1616,"./es-us.js":1616,"./es.js":1614,"./et":1617,"./et.js":1617,"./eu":1618,"./eu.js":1618,"./fa":1619,"./fa.js":1619,"./fi":1620,"./fi.js":1620,"./fo":1621,"./fo.js":1621,"./fr":1622,"./fr-ca":1623,"./fr-ca.js":1623,"./fr-ch":1624,"./fr-ch.js":1624,"./fr.js":1622,"./fy":1625,"./fy.js":1625,"./gd":1626,"./gd.js":1626,"./gl":1627,"./gl.js":1627,"./gom-latn":1628,"./gom-latn.js":1628,"./gu":1629,"./gu.js":1629,"./he":1630,"./he.js":1630,"./hi":1631,"./hi.js":1631,"./hr":1632,"./hr.js":1632,"./hu":1633,"./hu.js":1633,"./hy-am":1634,"./hy-am.js":1634,"./id":1635,"./id.js":1635,"./is":1636,"./is.js":1636,"./it":1637,"./it.js":1637,"./ja":1638,"./ja.js":1638,"./jv":1639,"./jv.js":1639,"./ka":1640,"./ka.js":1640,"./kk":1641,"./kk.js":1641,"./km":1642,"./km.js":1642,"./kn":1643,"./kn.js":1643,"./ko":1644,"./ko.js":1644,"./ky":1645,"./ky.js":1645,"./lb":1646,"./lb.js":1646,"./lo":1647,"./lo.js":1647,"./lt":1648,"./lt.js":1648,"./lv":1649,"./lv.js":1649,"./me":1650,"./me.js":1650,"./mi":1651,"./mi.js":1651,"./mk":1652,"./mk.js":1652,"./ml":1653,"./ml.js":1653,"./mn":1654,"./mn.js":1654,"./mr":1655,"./mr.js":1655,"./ms":1656,"./ms-my":1657,"./ms-my.js":1657,"./ms.js":1656,"./mt":1658,"./mt.js":1658,"./my":1659,"./my.js":1659,"./nb":1660,"./nb.js":1660,"./ne":1661,"./ne.js":1661,"./nl":1662,"./nl-be":1663,"./nl-be.js":1663,"./nl.js":1662,"./nn":1664,"./nn.js":1664,"./pa-in":1665,"./pa-in.js":1665,"./pl":1666,"./pl.js":1666,"./pt":1667,"./pt-br":1668,"./pt-br.js":1668,"./pt.js":1667,"./ro":1669,"./ro.js":1669,"./ru":1670,"./ru.js":1670,"./sd":1671,"./sd.js":1671,"./se":1672,"./se.js":1672,"./si":1673,"./si.js":1673,"./sk":1674,"./sk.js":1674,"./sl":1675,"./sl.js":1675,"./sq":1676,"./sq.js":1676,"./sr":1677,"./sr-cyrl":1678,"./sr-cyrl.js":1678,"./sr.js":1677,"./ss":1679,"./ss.js":1679,"./sv":1680,"./sv.js":1680,"./sw":1681,"./sw.js":1681,"./ta":1682,"./ta.js":1682,"./te":1683,"./te.js":1683,"./tet":1684,"./tet.js":1684,"./tg":1685,"./tg.js":1685,"./th":1686,"./th.js":1686,"./tl-ph":1687,"./tl-ph.js":1687,"./tlh":1688,"./tlh.js":1688,"./tr":1689,"./tr.js":1689,"./tzl":1690,"./tzl.js":1690,"./tzm":1691,"./tzm-latn":1692,"./tzm-latn.js":1692,"./tzm.js":1691,"./ug-cn":1693,"./ug-cn.js":1693,"./uk":1694,"./uk.js":1694,"./ur":1695,"./ur.js":1695,"./uz":1696,"./uz-latn":1697,"./uz-latn.js":1697,"./uz.js":1696,"./vi":1698,"./vi.js":1698,"./x-pseudo":1699,"./x-pseudo.js":1699,"./yo":1700,"./yo.js":1700,"./zh-cn":1701,"./zh-cn.js":1701,"./zh-hk":1702,"./zh-hk.js":1702,"./zh-tw":1703,"./zh-tw.js":1703};function r(e){var t=a(e);return n(t)}function a(e){var t=s[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=1713}}]);
//# sourceMappingURL=mk-app-person-card.0920bb64.chunk.js.map